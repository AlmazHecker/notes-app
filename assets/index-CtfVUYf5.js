import{r as c,e as O,j as v,p as z,c as E}from"./index-BnhIAaU_.js";const H="noteApp",w="settings";function P(){return new Promise((t,r)=>{const e=indexedDB.open(H,1);e.onupgradeneeded=n=>{const o=n.target.result;o.objectStoreNames.contains(w)||o.createObjectStore(w)},e.onsuccess=n=>{const o=n.target.result;t(o)},e.onerror=n=>{const o=n.target.error;r(o)}})}async function $(t){const e=(await P()).transaction(w,"readwrite");return e.objectStore(w).put(t,"folderHandle"),new Promise((o,s)=>{e.oncomplete=()=>o(),e.onerror=()=>s(e.error)})}async function y(){const e=(await P()).transaction(w,"readonly").objectStore(w);return new Promise(async(n,o)=>{const s=e.get("folderHandle");s.onsuccess=async()=>{let a=s.result;if(!a)try{a=await window.showDirectoryPicker(),await B(),await $(a)}catch(i){o(i);return}n(a)},s.onerror=()=>o(s.error)})}async function B(){return navigator.storage&&navigator.storage.persist?await navigator.storage.persist():!1}async function R(t){const r={mode:"readwrite"};return await t.queryPermission(r)==="granted"||await t.requestPermission(r)==="granted"}async function V(t){let r=0;for await(const[e,n]of t.entries())if(n.kind==="file"){const o=await n.getFile();r+=o.size}else n.kind==="directory"&&(r+=await V(n));return r}/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,e,n)=>n?n.toUpperCase():e.toLowerCase()),S=t=>{const r=L(t);return r.charAt(0).toUpperCase()+r.slice(1)},k=(...t)=>t.filter((r,e,n)=>!!r&&r.trim()!==""&&n.indexOf(r)===e).join(" ").trim();/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=c.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:o="",children:s,iconNode:a,...i},u)=>c.createElement("svg",{ref:u,...W,width:r,height:r,stroke:t,strokeWidth:n?Number(e)*24/Number(r):e,className:k("lucide",o),...i},[...a.map(([l,g])=>c.createElement(l,g)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=(t,r)=>{const e=c.forwardRef(({className:n,...o},s)=>c.createElement(D,{ref:s,iconNode:r,className:k(`lucide-${F(S(t))}`,`lucide-${t}`,n),...o}));return e.displayName=S(t),e};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],oe=I("arrow-left",M);class T{async getByName(r){const o=await(await(await y()).getFileHandle(`${r}`)).getFile();return JSON.parse(await o.text())}async update(r){const e=await y(),n={...r,tags:[],updatedAt:Date.now()},s=await(await e.getFileHandle(n.id,{create:!0})).createWritable();return await s.write(JSON.stringify(n)),await s.close(),n}async delete(r){await(await y()).removeEntry(r)}async getAll(){const r=await y(),e=[];for await(const[,n]of r.entries())if(n.kind==="file"){const o=await n.getFile();e.push(JSON.parse(await o.text()))}return e}async create(r){const e=await y(),n={...r,tags:[],createdAt:Date.now(),updatedAt:Date.now()},s=await(await e.getFileHandle(n.id,{create:!0})).createWritable();await s.write(JSON.stringify(n)),await s.close()}async import(r,e){const s=await(await(await y()).getFileHandle(r,{create:!0})).createWritable();await s.write(e),await s.close()}}class q{constructor(r=new T){this.strategy=r,this.getByName=e=>this.strategy.getByName(e),this.update=e=>this.strategy.update(e),this.delete=e=>this.strategy.delete(e),this.getAll=()=>this.strategy.getAll(),this.create=e=>this.strategy.create(e),this.import=(e,n)=>this.strategy.import(e,n)}}const J=new q,se=O((t,r)=>({notes:[],isLoading:!1,hasPermission:!0,fetchNotes:async()=>{t({isLoading:!0});const n=[...await J.getAll()].sort((o,s)=>s.updatedAt-o.updatedAt);return t({notes:n,isLoading:!1}),n},verifyPermission:async()=>{try{t({isLoading:!0});const e=await y();return await R(e)?(t({hasPermission:!0}),!0):(t({hasPermission:!1}),!1)}catch{return t({hasPermission:!1}),!1}}}));function C(t,r){if(typeof t=="function")return t(r);t!=null&&(t.current=r)}function j(...t){return r=>{let e=!1;const n=t.map(o=>{const s=C(o,r);return!e&&typeof s=="function"&&(e=!0),s});if(e)return()=>{for(let o=0;o<n.length;o++){const s=n[o];typeof s=="function"?s():C(t[o],null)}}}}function ae(...t){return c.useCallback(j(...t),t)}function U(t){const r=K(t),e=c.forwardRef((n,o)=>{const{children:s,...a}=n,i=c.Children.toArray(s),u=i.find(G);if(u){const l=u.props.children,g=i.map(d=>d===u?c.Children.count(l)>1?c.Children.only(null):c.isValidElement(l)?l.props.children:null:d);return v.jsx(r,{...a,ref:o,children:c.isValidElement(l)?c.cloneElement(l,void 0,g):null})}return v.jsx(r,{...a,ref:o,children:s})});return e.displayName=`${t}.Slot`,e}var Z=U("Slot");function K(t){const r=c.forwardRef((e,n)=>{const{children:o,...s}=e;if(c.isValidElement(o)){const a=X(o),i=Q(s,o.props);return o.type!==c.Fragment&&(i.ref=n?j(n,a):a),c.cloneElement(o,i)}return c.Children.count(o)>1?c.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var _=Symbol("radix.slottable");function ie(t){const r=({children:e})=>v.jsx(v.Fragment,{children:e});return r.displayName=`${t}.Slottable`,r.__radixId=_,r}function G(t){return c.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===_}function Q(t,r){const e={...r};for(const n in r){const o=t[n],s=r[n];/^on[A-Z]/.test(n)?o&&s?e[n]=(...i)=>{s(...i),o(...i)}:o&&(e[n]=o):n==="style"?e[n]={...o,...s}:n==="className"&&(e[n]=[o,s].filter(Boolean).join(" "))}return{...t,...e}}function X(t){var n,o;let r=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,e=r&&"isReactWarning"in r&&r.isReactWarning;return e?t.ref:(r=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,e=r&&"isReactWarning"in r&&r.isReactWarning,e?t.props.ref:t.props.ref||t.ref)}const A=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,N=z,Y=(t,r)=>e=>{var n;if((r==null?void 0:r.variants)==null)return N(t,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:o,defaultVariants:s}=r,a=Object.keys(o).map(l=>{const g=e==null?void 0:e[l],d=s==null?void 0:s[l];if(g===null)return null;const f=A(g)||A(d);return o[l][f]}),i=e&&Object.entries(e).reduce((l,g)=>{let[d,f]=g;return f===void 0||(l[d]=f),l},{}),u=r==null||(n=r.compoundVariants)===null||n===void 0?void 0:n.reduce((l,g)=>{let{class:d,className:f,...m}=g;return Object.entries(m).every(h=>{let[p,b]=h;return Array.isArray(b)?b.includes({...s,...i}[p]):{...s,...i}[p]===b})?[...l,d,f]:l},[]);return N(t,a,u,e==null?void 0:e.class,e==null?void 0:e.className)},ee=Y("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function ce({className:t,variant:r,size:e,asChild:n=!1,...o}){const s=n?Z:"button";return v.jsx(s,{"data-slot":"button",className:E(ee({variant:r,size:e,className:t})),...o})}function le(t,r){const e=c.createContext(r),n=s=>{const{children:a,...i}=s,u=c.useMemo(()=>i,Object.values(i));return v.jsx(e.Provider,{value:u,children:a})};n.displayName=t+"Provider";function o(s){const a=c.useContext(e);if(a)return a;if(r!==void 0)return r;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[n,o]}function ue(t,r=[]){let e=[];function n(s,a){const i=c.createContext(a),u=e.length;e=[...e,a];const l=d=>{var x;const{scope:f,children:m,...h}=d,p=((x=f==null?void 0:f[t])==null?void 0:x[u])||i,b=c.useMemo(()=>h,Object.values(h));return v.jsx(p.Provider,{value:b,children:m})};l.displayName=s+"Provider";function g(d,f){var p;const m=((p=f==null?void 0:f[t])==null?void 0:p[u])||i,h=c.useContext(m);if(h)return h;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[l,g]}const o=()=>{const s=e.map(a=>c.createContext(a));return function(i){const u=(i==null?void 0:i[t])||s;return c.useMemo(()=>({[`__scope${t}`]:{...i,[t]:u}}),[i,u])}};return o.scopeName=t,[n,te(o,...r)]}function te(...t){const r=t[0];if(t.length===1)return r;const e=()=>{const n=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const a=n.reduce((i,{useScope:u,scopeName:l})=>{const d=u(s)[`__scope${l}`];return{...i,...d}},{});return c.useMemo(()=>({[`__scope${r.scopeName}`]:a}),[a])}};return e.scopeName=r.scopeName,e}function de(t,r,{checkForDefaultPrevented:e=!0}={}){return function(o){if(t==null||t(o),e===!1||!o.defaultPrevented)return r==null?void 0:r(o)}}var re=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{};function fe(t){const[r,e]=c.useState(void 0);return re(()=>{if(t){e({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let a,i;if("borderBoxSize"in s){const u=s.borderBoxSize,l=Array.isArray(u)?u[0]:u;a=l.inlineSize,i=l.blockSize}else a=t.offsetWidth,i=t.offsetHeight;e({width:a,height:i})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else e(void 0)},[t]),r}export{oe as A,ce as B,Z as S,ae as a,U as b,I as c,ue as d,de as e,fe as f,se as g,y as h,ie as i,le as j,j as k,V as l,ee as m,J as n,re as u};
