import{r as d,j as e,c as U,u as G,a as K,f as X}from"../Cb7hvKwT.js";import{c as V,a as $,P as w,u as J,b as A,d as I,e as Q,C as W,f as Y,B as E,A as Z}from"./index-DJVunPsQ.js";import{u as ee}from"./index-CCUP6qfF.js";import{P as te}from"./index-CQYVRXgp.js";const se=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],P=V("download",se);var N="Checkbox",[re]=$(N),[ne,S]=re(N);function oe(t){const{__scopeCheckbox:i,checked:n,children:a,defaultChecked:c,disabled:r,form:p,name:m,onCheckedChange:u,required:b,value:k="on",internal_do_not_use_render:x}=t,[f,s]=J({prop:n,defaultProp:c??!1,onChange:u,caller:N}),[o,g]=d.useState(null),[C,l]=d.useState(null),h=d.useRef(!1),j=o?!!p||!!o.closest("form"):!0,y={checked:f,disabled:r,setChecked:s,control:o,setControl:g,name:m,form:p,value:k,hasConsumerStoppedPropagationRef:h,required:b,defaultChecked:v(c)?!1:c,isFormControl:j,bubbleInput:C,setBubbleInput:l};return e.jsx(ne,{scope:i,...y,children:ae(x)?x(y):a})}var B="CheckboxTrigger",M=d.forwardRef(({__scopeCheckbox:t,onKeyDown:i,onClick:n,...a},c)=>{const{control:r,value:p,disabled:m,checked:u,required:b,setControl:k,setChecked:x,hasConsumerStoppedPropagationRef:f,isFormControl:s,bubbleInput:o}=S(B,t),g=A(c,k),C=d.useRef(u);return d.useEffect(()=>{const l=r?.form;if(l){const h=()=>x(C.current);return l.addEventListener("reset",h),()=>l.removeEventListener("reset",h)}},[r,x]),e.jsx(w.button,{type:"button",role:"checkbox","aria-checked":v(u)?"mixed":u,"aria-required":b,"data-state":F(u),"data-disabled":m?"":void 0,disabled:m,value:p,...a,ref:g,onKeyDown:I(i,l=>{l.key==="Enter"&&l.preventDefault()}),onClick:I(n,l=>{x(h=>v(h)?!0:!h),o&&s&&(f.current=l.isPropagationStopped(),f.current||l.stopPropagation())})})});M.displayName=B;var z=d.forwardRef((t,i)=>{const{__scopeCheckbox:n,name:a,checked:c,defaultChecked:r,required:p,disabled:m,value:u,onCheckedChange:b,form:k,...x}=t;return e.jsx(oe,{__scopeCheckbox:n,checked:c,defaultChecked:r,disabled:m,required:p,onCheckedChange:b,name:a,form:k,value:u,internal_do_not_use_render:({isFormControl:f})=>e.jsxs(e.Fragment,{children:[e.jsx(M,{...x,ref:i,__scopeCheckbox:n}),f&&e.jsx(q,{__scopeCheckbox:n})]})})});z.displayName=N;var D="CheckboxIndicator",T=d.forwardRef((t,i)=>{const{__scopeCheckbox:n,forceMount:a,...c}=t,r=S(D,n);return e.jsx(te,{present:a||v(r.checked)||r.checked===!0,children:e.jsx(w.span,{"data-state":F(r.checked),"data-disabled":r.disabled?"":void 0,...c,ref:i,style:{pointerEvents:"none",...t.style}})})});T.displayName=D;var L="CheckboxBubbleInput",q=d.forwardRef(({__scopeCheckbox:t,...i},n)=>{const{control:a,hasConsumerStoppedPropagationRef:c,checked:r,defaultChecked:p,required:m,disabled:u,name:b,value:k,form:x,bubbleInput:f,setBubbleInput:s}=S(L,t),o=A(n,s),g=ee(r),C=Q(a);d.useEffect(()=>{const h=f;if(!h)return;const j=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(j,"checked").set,H=!c.current;if(g!==r&&_){const O=new Event("click",{bubbles:H});h.indeterminate=v(r),_.call(h,v(r)?!1:r),h.dispatchEvent(O)}},[f,g,r,c]);const l=d.useRef(v(r)?!1:r);return e.jsx(w.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??l.current,required:m,disabled:u,name:b,value:k,form:x,...i,tabIndex:-1,ref:o,style:{...i.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});q.displayName=L;function ae(t){return typeof t=="function"}function v(t){return t==="indeterminate"}function F(t){return v(t)?"indeterminate":t?"checked":"unchecked"}function R({className:t,...i}){return e.jsx(z,{"data-slot":"checkbox",className:U("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...i,children:e.jsx(T,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(W,{className:"size-3.5"})})})}const ue=()=>{const{t}=G(),i=K(),n=Y(),[a,c]=d.useState({}),[r,p]=d.useState(!1),m=s=>{c(o=>({...o,[s]:!o[s]}))},u=()=>{const s=n.notes.every(g=>a[g.id]),o={};n.notes.forEach(g=>{o[g.id]=!s}),c(o)},b=()=>n.notes.filter(s=>a[s.id]).length,k=async()=>{try{if(p(!0),n.notes.filter(o=>a[o.id]).map(o=>o.id).length===0)return;alert("This feature is currently disabled. Use Settings -> Data Management -> Export Data for full backup.");return}finally{p(!1)}},x=()=>i("/settings");d.useEffect(()=>{n.getNotes()},[]);const f=()=>n.notes.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center h-full py-12",children:e.jsx("p",{className:"text-slate-500 text-center",children:t("exportNotes.noNotes")})}):e.jsxs("div",{className:"h-[calc(100vh-11rem)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(R,{id:"toggle-select",checked:n.notes.every(s=>a[s.id]),onCheckedChange:u}),e.jsx("label",{className:"text-sm font-medium",htmlFor:"toggle-select",children:n.notes.every(s=>a[s.id])?t("exportNotes.deselectAll"):t("exportNotes.selectAll")})]}),e.jsx("div",{className:"space-y-2 mb-20",children:n.notes.map(s=>e.jsxs("div",{className:"bg-card p-5 rounded-md cursor-pointer transition-colors flex flex-col w-full",onClick:()=>m(s.id),children:[e.jsxs("div",{className:"flex justify-between items-center gap-3",children:[e.jsx(R,{checked:a[s.id],id:s.id}),e.jsx("span",{className:"font-medium mr-auto",children:s.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:X(s.updatedAt)})]}),s.isEncrypted?e.jsx("p",{className:"text-xs text-muted-foreground mt-1 italic",children:t("exportNotes.encrypted")}):e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:s.snippet})]},s.id))})]});return e.jsxs("div",{className:"container max-w-5xl mx-auto flex flex-col h-full bg-background",children:[e.jsxs("div",{className:"sticky top-0 z-10 border-b px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:x,className:"mr-2",children:e.jsx(Z,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-medium",children:t("exportNotes.title")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{size:"sm",onClick:k,disabled:r||b()===0,className:"hidden sm:flex items-center",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:t("exportNotes.buttons.export")})]}),e.jsx(E,{size:"icon",onClick:k,disabled:r||b()===0,className:"sm:hidden",children:e.jsx(P,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex-1 px-4 py-3 overflow-hidden",children:f()})]})};export{ue as default};
